{% set accounts = (accounts is defined) ? accounts : [] %}
{% set transactionTypes = (transactionTypes is defined) ? transactionTypes : [] %}
{% set showLegend = (showLegend is defined) ? showLegend : true %}
{% set showControls = (showControls is defined) ? showControls : true %}

<form id="transactionForm" class="form-horizontal" autocomplete="off">
	
	{% if showLegend %}
	<legend>Account <small>{{ mode }}</small></legend>
	{% endif %}
	
	{#{% if (editMode == false) %}
	<h2>{{ [account.first_name, account.last_name]|join(' ') }}</h2>
	{% endif %}#}
	
	<div class="form-group">
		<label for="account_id" class="col-sm-2 control-label">Van rekening</label>
		<div class="col-sm-10">
			<select class="form-control select2" id="account_id" name="account_id" data-placeholder="Selecteer uw rekening">
			{% for account in accounts %}
				<option value="{{ account.id }}">{{ [account.first_name, account.last_name]|join(' ') }}</option>
			{% endfor %}
			</select>
		</div>
	</div>
	
	<div class="form-group">
		<label for="account_counterparty_id" class="col-sm-2 control-label">Naar tegenrekening</label>
		<div class="col-sm-10">
			<select class="form-control select2" id="account_counterparty_id" name="account_counterparty_id" data-placeholder="Selecteer de tegenrekening">
			{% for account in accounts %}
				<option value="{{ account.id }}">{{ [account.first_name, account.last_name]|join(' ') }}</option>
			{% endfor %}
			</select>
		</div>
	</div>
	
	<div class="form-group">
		<label for="transaction_amount" class="col-sm-2 control-label">Bedrag</label>
		<div class="col-sm-10">
			<div class="input-group">
				<div class="input-group-addon">&euro;</div>
				<input type="text" class="form-control" id="transaction_amount" name="transaction_amount" placeholder="0.00">
			</div>
		</div>
	</div>
	
	<div class="form-group">
		<label for="transaction_type_code" class="col-sm-2 control-label">Betaalwijze</label>
		<div class="col-sm-10">
		
		{% for type in transactionTypes %}
			{% set checked = (loop.index0 == 0) ? 'checked="checked"' : '' %}
			{% set typeIcon = (type.code == "BANK") ? 'credit-card' : (type.code == "CASH") ? 'euro': 'heart-empty' %}
			
			<div class="radio radio-success">
				<label>
					<input type="radio" name="transaction_type_code" value="{{ type.id }}" {{ checked }}><span class="circle"></span><span class="check"></span>
					<i class="glyphicon glyphicon-{{ typeIcon }}" data-toggle="tooltip" title="{{ type.code|title }}"></i>
				</label>
			</div>
			
		{% endfor %}
		</div>
	</div>
	
	<div class="form-group">
		<label for="transaction_date" class="col-sm-2 control-label">Datum</label>
		<div class="col-sm-10">
			<div class='input-group date' id='transaction_date'>
				<input type="text" class="form-control" name="transaction_date">
				<span class="input-group-addon">
					<span class="glyphicon glyphicon-calendar"></span>
				</span>
			</div>
		</div>
	</div>
	
	{% if showControls %}
	<div class="form-group">
		<div class="col-sm-10 col-sm-offset-2">
			<button type="button" class="btn btn-default btn-raised btn-cancel">Annuleren</button>
			<button type="submit" class="btn btn-primary btn-raised btn-submit">Verzenden</button>
		</div>
	</div>
	{% endif %}
	
</form>

<script type="text/javascript">
	var $form = $('#transactionForm');
	
	//$('.select2', $form).select2();
	$('.select2', $form).dropdown({"optionClass": "withripple"});
	
	$form.formValidation({
		locale: 'nl_NL',
		fields: {
			transaction_amount: {
				validators: {
					notEmpty: {},
					numeric: {}
				}
			},
			transaction_date: {
				validators: {
					notEmpty: {}
				}
			}
		}
	});
</script>